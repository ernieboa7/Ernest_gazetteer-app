<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Ernest Gazetteer â€¢ Project 1</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="./css/style.css" />
  </head>
  <body class="bg-light">
    <!-- Sticky Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top shadow-sm">
      <div class="container-fluid">
        <a class="navbar-brand fw-semibold" href="#">Ernest Gazetteer</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navContent">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navContent">
          <ul class="navbar-nav me-auto">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="#">Home</a>
            </li>
          </ul>
          <div class="d-flex align-items-center gap-2">
            <span class="badge text-bg-secondary" id="userLocationBadge" title="Your detected country">Detectingâ€¦</span>
          </div>
        </div>
      </div>
    </nav>

    <!-- Main layout -->
    <main class="container-fluid p-0">
      <div class="row g-0 flex-nowrap">
        <!-- Side panel -->
        <aside class="col-12 col-lg-4 col-xxl-3 border-end bg-white panel-scroll" id="sidePanel">
          <div class="p-3">
            <h1 class="h4 mb-3">Explore Places</h1>

            <!-- Search -->
            <form id="searchForm" class="needs-validation" novalidate>
              <div class="mb-2">
                <label class="form-label">Search by place name</label>
                <div class="input-group">
                  <input type="text" id="placeInput" class="form-control" placeholder="e.g., Dublin" />
                  <button class="btn btn-primary" id="btnSearchPlace" type="submit">Search</button>
                </div>
              </div>

              <div class="mb-2">
                <div class="row g-2">
                  <div class="col-6">
                    <label class="form-label">Latitude</label>
                    <input type="number" step="any" id="latInput" class="form-control" placeholder="53.3498">
                  </div>
                  <div class="col-6">
                    <label class="form-label">Longitude</label>
                    <input type="number" step="any" id="lngInput" class="form-control" placeholder="-6.2603">
                  </div>
                </div>
                <div class="mt-2 d-grid">
                  <button class="btn btn-outline-primary" id="btnSearchCoords" type="button">Search by coordinates</button>
                </div>
              </div>

              <div class="d-grid gap-2 mt-2">
                <button class="btn btn-outline-secondary" id="btnUseMyLocation" type="button">Use my location</button>
                <button class="btn btn-outline-dark" id="btnClear" type="button">Clear</button>
              </div>
            </form>

            <hr class="my-3"/>

            <!-- Info accordions -->
            <div class="accordion" id="infoAccordion">

              <!-- Location Info -->
              <div class="accordion-item">
                <h2 class="accordion-header" id="headingPlace">
                  <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapsePlace" aria-expanded="true">
                    Location
                  </button>
                </h2>
                <div id="collapsePlace" class="accordion-collapse collapse show" data-bs-parent="#infoAccordion">
                  <div class="accordion-body small" id="placeInfo">
                    <em>No location selected.</em>
                  </div>
                </div>
              </div>

              <!-- Weather Info -->
              <div class="accordion-item">
                <h2 class="accordion-header" id="headingWeather">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseWeather">
                    Weather
                  </button>
                </h2>
                <div id="collapseWeather" class="accordion-collapse collapse" data-bs-parent="#infoAccordion">
                  <div class="accordion-body small" id="weatherInfo">
                    <em>No weather yet.</em>
                  </div>
                </div>
              </div>

              <!-- Timezone Info -->
              <div class="accordion-item">
                <h2 class="accordion-header" id="headingTime">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTime">
                    Local Time & Timezone
                  </button>
                </h2>
                <div id="collapseTime" class="accordion-collapse collapse" data-bs-parent="#infoAccordion">
                  <div class="accordion-body small" id="timeInfo">
                    <em>No time/zone yet.</em>
                  </div>
                </div>
              </div>

              <!-- ðŸŸ© NEW: Country Info -->
              <div class="accordion-item">
                <h2 class="accordion-header" id="headingCountry">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseCountry">
                    Country Info
                  </button>
                </h2>
                <div id="collapseCountry" class="accordion-collapse collapse" data-bs-parent="#infoAccordion">
                  <div class="accordion-body small" id="countryInfo">
                    <em>No country info.</em>
                  </div>
                </div>
              </div>
            </div>

            <!-- Search History -->
            <div class="mt-3">
              <h2 class="h6">Search history</h2>
              <ul class="list-group list-group-flush small" id="historyList"></ul>
            </div>
          </div>
        </aside>

        <!-- Map Area -->
        <section class="col d-flex">
          <div id="map" class="flex-fill"></div>
        </section>
      </div>
    </main>

    <!-- Loader -->
    <div class="position-fixed top-0 start-50 translate-middle-x mt-3" style="z-index: 1080;">
      <div class="spinner-border text-primary d-none" id="globalLoader" role="status">
        <span class="visually-hidden">Loadingâ€¦</span>
      </div>
    </div>

    <!-- Toast Notifications -->
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 1080">
      <div id="toast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header">
          <strong class="me-auto">Gazetteer</strong>
          <small>now</small>
          <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body" id="toastBody">Hello!</div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="./js/app.js"></script>
  </body>
</html>
